.. sectionauthor:: Jonathon Love

======================================
Results Definition (``.r.yaml`` files)
======================================

(work in progress)

Overview
--------

   The results definition is a yaml file in the ``jamovi/`` directory, with the extension ``.r.yaml``. the results definition describes the results produced by
   the analysis. the file is named to match the name of the analysis, but converted to lowercase. an example is ``ttestis.r.yaml``:

.. code-block:: yaml

   - name: TTestIS
     title: Independent Samples T-Test
     jrs: '1.0'
     items:
     - name: ...
       type: ...
     - name: ...
       type: ...

+---------------------+---------------------------------------------------------------------------------------------------------------------------------------+
| Property            | Function                                                                                                                              |
+=====================+=======================================================================================================================================+
| ``name``            | The name of the analysis. Must correspond to the filename.                                                                            |
+---------------------+---------------------------------------------------------------------------------------------------------------------------------------+
| ``title``           | The title to display at the top of the results.                                                                                       |
+---------------------+---------------------------------------------------------------------------------------------------------------------------------------+
| ``jrs``             | The ``jamovi results spec`` should be ``1.0``. Must be wrapped in quotes to prevent it being interpretted as a number.                |
+---------------------+---------------------------------------------------------------------------------------------------------------------------------------+
| ``items``           | An array of results elements that make up the results. these are described in greater detail below.                                   |
+---------------------+---------------------------------------------------------------------------------------------------------------------------------------+


Results
-------

   Each results element has the following properties:

+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| Property            | default    | Description                                                                                                              |
+=====================+============+==========================================================================================================================+
| ``name``            |            | Name of the results-element, a string.                                                                                   |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| ``type``            |            | Type of the results-element, a string, see the list of results element types below.                                      |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| ``title``           |            | Title preceding the output from results element in the output, a string.                                                 |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| ``visible``         | ``true``   | Whether the results element is visible at initiation (``TRUE```/ ``FALSE``).                                             |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| ``clearWith``       | ``*``      | Event to clear the results element (a string).                                                                           |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+

   Different results element types have different additional properties.


The different results element types are as follows:

Preformatted
~~~~~~~~~~~~

   Preformatted represents the simplest of results elements. it is simply a block of preformattd text.

   It has no additional properties.


Table
~~~~~

   Table is the most common result element in the results from jamovi analyses. Tables are represented as rich HTML tables in jamovi, and as nicely formatted
   ASCII tables in an interactive R session.

   It can have the following properties:

+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| Property            | default    | Description                                                                                                              |
+=====================+============+==========================================================================================================================+
| ``columns``         |            | An array of columns objects, see below.                                                                                  |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| ``rows``            | ``0``      | An integer specifying the number of rows, or a data-binding where one row is created per element of the bound value.     |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| ``swapRowsColumns`` | ``false``  | Whether the rows and columns should be swapped.                                                                          |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| ``notes``           | ``[ ]``    | An array of strings which appear as additional notes in the footnotes of the table.                                      |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+

Column
^^^^^^

   Columns within a table can have the following properties:

+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| Property            | default    | Description                                                                                                              |
+=====================+============+==========================================================================================================================+
| ``name``            |            | The name of the column, a string.                                                                                        |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| ``title``           |            | The title that appears at the top of the column.                                                                         |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| ``type``            | ``number`` | Either ``number`` (aligned right), ``integer`` (aligned right, displayed to zero decimal places) or ``text`` (aligned    |
|                     |            | left).                                                                                                                   |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| ``format``          |            | A string with comma separated values; ``zto``, ``pvalue`` (optional).                                                    |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| ``content``         |            | The content to appear in the cells of the column (optional).                                                             |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| ``visible``         | ``true``   | ``true``, ``false`` or a data-binding. The column will be visible if the bound value isnâ€™t ``false`` or ``null``.        |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| ``superTitle``      |            | A title to appear above the title of the column (optional).                                                              |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| ``combineBelow``    | ``false``  | If ``TRUE`` and multiple adjacent cells in the column contain the same value, they will be combined into a single cell.  |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+


Image
~~~~~

   Images can have the following properties:

+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| Property            | default    | Description                                                                                                              |
+=====================+============+==========================================================================================================================+
| ``width``           |            | Width of the image element in the output (in pixels).                                                                    |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| ``height``          |            | Height of the image element in the output (in pixels).                                                                   |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| ``renderFun``       |            | R-function to call in order to render the image in the output.                                                           |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| ``requiresData``    |            |                                                                                                                          |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+


Group
~~~~~

   Groups can have the following properties:

+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| Property            | default    | Description                                                                                                              |
+=====================+============+==========================================================================================================================+
| ``items``           |            | Result elements belonging the the group, a list of strings.                                                              |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+


Array
~~~~~

   Arrays can have the following properties:

+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| Property            | default    | Description                                                                                                              |
+=====================+============+==========================================================================================================================+
| ``items``           |            | Result elements belonging the the array, a list of strings.                                                              |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
| ``template``        |            |                                                                                                                          |
+---------------------+------------+--------------------------------------------------------------------------------------------------------------------------+
